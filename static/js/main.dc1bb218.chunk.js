(this["webpackJsonpcannon-fudder"]=this["webpackJsonpcannon-fudder"]||[]).push([[0],{10:function(t,e,a){t.exports=a(19)},15:function(t,e,a){},17:function(t,e,a){},18:function(t,e,a){t.exports=a.p+"static/media/logo.25bf045c.svg"},19:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(8),s=a.n(i),o=(a(15),a(6)),l=a.n(o),c=a(9),h=a(1),u=a(2),p=a(4),f=a(3),m=a(5),d=(a(17),a(18),function(t){function e(){return Object(h.a)(this,e),Object(p.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return this.props.player?r.a.createElement("div",{className:"Controls"},r.a.createElement("label",{for:"Name"},"Name"),r.a.createElement("span",{className:"Name"},this.props.player.name),r.a.createElement("label",{for:"Health"},"Health"),r.a.createElement("span",{className:"Health"},this.props.player.health),r.a.createElement("label",{for:"Angle"},"Angle"),r.a.createElement("span",{className:"Angle"},r.a.createElement("input",{type:"number",className:"Angle",value:this.props.player.angle}),r.a.createElement("button",{onClick:this.props.turnLeft},"<"),r.a.createElement("button",{onClick:this.props.turnRight},">")),r.a.createElement("label",{for:"Power"},"Power"),r.a.createElement("span",{className:"Power"},r.a.createElement("input",{type:"number",className:"Angle",value:this.props.player.power}),r.a.createElement("button",{onClick:this.props.lessPower},"-"),r.a.createElement("button",{onClick:this.props.morePower},"+")),r.a.createElement("button",{id:"fire",onClick:this.props.fire},"Fire")):null}}]),e}(r.a.Component)),y=function(t){function e(){var t,a;Object(h.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).state={name:""},a.update=function(t){a.setState({name:t.target.value})},a.add=function(){a.props.addPlayer(a.state.name),a.setState({name:""})},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"AddPlayer"},r.a.createElement("input",{id:"name",onChange:this.update}),r.a.createElement("button",{onClick:this.add},"Add Player"))}}]),e}(r.a.Component),v=function(t){function e(){var t,a;Object(h.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).state={name:""},a.update=function(t){a.setState({name:t.target.value})},a.add=function(){a.props.addPlayer(a.state.name)},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return this.props.list.map((function(t){return r.a.createElement("div",{className:"WaitingPlayer"},t.name," ",r.a.createElement("span",{className:"Health"},t.health))}))}}]),e}(r.a.Component);function g(t){this._seed=t%2147483647,this._seed<=0&&(this._seed+=2147483646)}g.prototype.next=function(){return this._seed=16807*this._seed%2147483647},g.prototype.nextFloat=function(t,e){return(this.next()-1)/2147483646};var P=function(){this.frequency=10,this.subDivision=10,this.highLimit=300,this.lowLimit=500,this.lastPos={x:0,y:0},this.points=[],this.width=window.innerWidth};function w(t,e){return Math.floor(Math.random()*(e-t+1))+t}function b(t,e,a){var n=3.1415927*a,r=.5*(1-Math.cos(n));return t*(1-r)+e*r}P.prototype.fill=function(){var t=[];if(this.lastPos={x:this.lastPos.x,y:w(this.lowLimit,this.highLimit)},this.points.length>0){this.lastPos={x:0,y:this.points[0][1]};for(var e=0;e<this.frequency;e++)for(var a=this.add(null,this.points[e][1]),n=0;n<a.length;n++)t.push(a[n])}else for(var r=0;r<this.frequency;r++)for(var i=this.add(),s=0;s<i.length;s++)t.push(i[s]);return t},P.prototype.add=function(t,e){var a,n;a=t||this.lastPos.x+this.width/this.frequency,n=e||w(this.lowLimit,this.highLimit);for(var r=[],i=0;i<this.subDivision;i++){var s=i/this.subDivision,o=(a-this.lastPos.x)/this.subDivision*i+this.lastPos.x,l=b(this.lastPos.y,n,s);r.push({x:o,y:l})}return this.lastPos={x:a,y:n},r};var E=P,x=Math.PI/180,O=function(t){function e(){var t,a;Object(h.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).createHeightMap=function(){a.noise=new E,a.noise.frequency=10,a.noise.subDivision=10,a.noise.highLimit=window.innerHeight/3,a.noise.lowLimit=20,a.noise.lastPos={x:0,y:0},a.noise.width=a.cnv.offsetWidth,a.map=a.noise.fill(),a.props.controller.paintStage=a.paintStage,a.props.controller.getStartingPosition=function(){return a.map.random()}},a.paintStage=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=a.cnv.offsetWidth,n=a.cnv.offsetHeight,r=a.ctx;r.fillStyle="#00f",r.fillRect(0,0,e,n),r.fillStyle="#0f0",r.beginPath(),r.moveTo(0,n);var i=null;if(a.map.forEach((function(t){i=t,r.lineTo(t.x,n-t.y)})),r.lineTo(e,n-i.y),r.lineTo(e,n),r.lineTo(0,n),r.closePath(),r.fill(),r.fillStyle="#f00",a.props.controller.state.player.forEach((function(t){r.beginPath(),r.arc(t.x,n-t.y,10,0,2*Math.PI),r.fill(),r.beginPath(),r.moveTo(t.x,n-t.y);var e=(720-t.angle)%360,a=12*Math.cos(e*x),i=12*Math.sin(e*x);r.lineTo(t.x+a,n-t.y+i),r.stroke()})),t){r.fillStyle="#000",r.beginPath(),r.arc(t.x,n-t.y,3,0,2*Math.PI),r.fill();var s=Math.round(t.x),o=Math.round(t.y),l=a.cachedCtx.getImageData(s,n-o,1,1).data;if(0==l[0]&&255==l[1]&&0==l[2]&&255==l[3])return!0;if(t.x<0||t.x>e||t.y<0)return!0}return!1},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.cnv=document.getElementById("stage"),this.cnv.width=window.innerWidth,this.cnv.height=window.innerHeight,this.ctx=this.cnv.getContext("2d"),this.createHeightMap(),this.paintStage(),this.cachedMap=new OffscreenCanvas(this.cnv.width,this.cnv.height),this.cachedCtx=this.cachedMap.getContext("2d"),this.cachedCtx.drawImage(this.cnv,0,0)}},{key:"render",value:function(){return r.a.createElement("div",{className:"Battlefield"},r.a.createElement("canvas",{id:"stage"}))}}]),e}(r.a.Component);Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};var j=9.81,M=Math.PI/180,k=function(t){function e(){var t,a;Object(h.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).state={player:[],currentPlayer:null},a.addPlayer=function(t){var e={name:t,health:100,points:0,angle:45,power:100};Object.assign(e,a.getStartingPosition()),a.state.player.push(e),a.state.currentPlayer=a.state.currentPlayer||e,a.forceUpdate()},a.turnLeft=function(){a.state.currentPlayer&&(a.state.currentPlayer.angle-=5,a.forceUpdate())},a.turnRight=function(){a.state.currentPlayer&&(a.state.currentPlayer.angle+=5,a.forceUpdate())},a.lessPower=function(){a.state.currentPlayer&&(a.state.currentPlayer.power-=5,a.forceUpdate())},a.morePower=function(){a.state.currentPlayer&&(a.state.currentPlayer.power+=5,a.forceUpdate())},a.fire=Object(c.a)(l.a.mark((function t(){var e,n,r,i,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.state.currentPlayer){t.next=2;break}return t.abrupt("return");case 2:return e=0,n=a.state.currentPlayer,r=(720-n.angle)%360,i=n.x+6*Math.cos(r*M),s=n.y-6*Math.sin(r*M),o={x:i,y:s},t.next=10,new Promise((function(t){var r=setInterval((function(){e+=.033,o.x=i+n.power*e*Math.cos(n.angle*M),o.y=s+n.power*e*Math.sin(n.angle*M)-j*Math.pow(e,2)/2,requestAnimationFrame((function(){a.paintStage(o)&&(clearTimeout(r),t())}))}),16)}));case 10:case"end":return t.stop()}}),t)}))),a.componentDidUpdate=function(){a.paintStage(!1)},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){window.App=this;var t=this.state.currentPlayer,e=this.state.player.filter((function(e){return e!==t}));return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Header"}),r.a.createElement(d,{player:t,turnLeft:this.turnLeft,turnRight:this.turnRight,lessPower:this.lessPower,morePower:this.morePower,fire:this.fire}),r.a.createElement("div",{className:"WaitingPlayers"},r.a.createElement(v,{list:e})),r.a.createElement("div",{className:"Settings"},r.a.createElement(y,{addPlayer:this.addPlayer}),r.a.createElement("button",null,"Restart Game")),r.a.createElement(O,{controller:this}))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.dc1bb218.chunk.js.map